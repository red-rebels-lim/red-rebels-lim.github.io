<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Event schedule calendar for Red Rebels Limassol - Football and Volleyball matches">
    <meta name="theme-color" content="#E02520">
    <title data-label="titles.calendar">Red Rebels Calendar 2025</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="assets/images/clear_logo.png">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/styles/styles.css">
</head>
<body>

<div class="main-container">
    <!-- Navigation Bar -->
    <div id="navbar-container"></div>

    <!-- Calendar Component -->
    <div id="calendar-component" class="page-component">
        <!-- Month Navigation -->
        <div class="navigation-controls">
            <div class="month-navigation">
                <button class="btn btn-arrow" onclick="navigatePrevious()" data-label-title="monthNav.previous" title="Previous Month">
                    ‚óÄ <span data-label="monthNav.previous">Œ†œÅŒøŒ∑Œ≥ŒøœçŒºŒµŒΩŒøœÇ</span>
                </button>
                <div class="month-label" id="month-label">ŒùŒøŒ≠ŒºŒ≤œÅŒπŒøœÇ</div>
                <button class="btn btn-arrow" onclick="navigateNext()" data-label-title="monthNav.next" title="Next Month">
                    <span data-label="monthNav.next">ŒïœÄœåŒºŒµŒΩŒøœÇ</span> ‚ñ∂
                </button>
            </div>
        </div>

        <!-- Event Filters -->
        <div class="filters-container">
            <!-- Collapsible Filter Panel -->
            <div class="filters-panel" id="filters-panel">
                <div class="filter-rows-container" id="filter-rows-container">
                    <!-- Filter rows will be added dynamically -->
                </div>

                <!-- Filter Actions -->
                <div class="filter-actions">
                    <button class="filter-action-btn filter-add-btn" onclick="addFilterRow()">
                        <span>+</span>
                        <span data-label="filters.addMore">Add More</span>
                    </button>
                    <button class="filter-action-btn filter-clear-btn" onclick="clearFilters()">
                        <span>√ó</span>
                        <span data-label="filters.clearAll">Clear All</span>
                    </button>
                    <button class="filter-action-btn filter-apply-btn" onclick="applyFiltersAndClose()">
                        <span>‚úì</span>
                        <span data-label="filters.apply">Apply</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Calendar Container -->
        <div id="calendar-display"></div>

        <!-- Event Popover -->
        <div id="event-popover" class="event-popover">
            <div class="event-popover-content">
                <button class="event-popover-close" onclick="closeEventPopover()">&times;</button>
                <div id="event-popover-body"></div>
            </div>
        </div>
    </div>

    <!-- Stats Component -->
    <div id="stats-component" class="page-component" style="display: none;">
        <div class="header">
            <h1 data-label="titles.stats">Nea Salamina Stats 25/26</h1>
        </div>

        <!-- Statistics Display -->
        <div class="statistics-container">
            <div class="statistics-header">
                <h3 class="statistics-title"><span data-label-html="icons.stats">üìä</span> <span data-label="titles.teamStats">Œ£œÑŒ±œÑŒπœÉœÑŒπŒ∫Œ¨ ŒüŒºŒ¨Œ¥Œ±œÇ</span></h3>
            </div>
            <div id="statistics-display"></div>
        </div>
    </div>
</div>

<!-- Footer -->
<div id="footer-container"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Language Labels -->
<script src="assets/languages/en.js?v=6" onerror="console.error('Failed to load language file')"></script>
<!-- Labels Manager -->
<script src="assets/scripts/labels.js?v=6" onerror="console.error('Failed to load labels.js')"></script>
<!-- Component Loader -->
<script src="assets/scripts/loader.js?v=6" onerror="console.error('Failed to load loader.js')"></script>
<!-- Events Data (auto-generated by scraper) -->
<script src="assets/scripts/events-data.js?v=6" onerror="console.error('Failed to load events-data.js')"></script>
<!-- Calendar Data -->
<script src="assets/scripts/data.js?v=6" onerror="console.error('Failed to load data.js')"></script>
<!-- Statistics Module -->
<script src="assets/scripts/stats.js?v=6" onerror="console.error('Failed to load stats.js')"></script>
<!-- Calendar Components -->
<script src="assets/scripts/components.js?v=6" onerror="console.error('Failed to load components.js')"></script>
<!-- Filters Module -->
<script src="assets/scripts/filters.js?v=6" onerror="console.error('Failed to load filters.js')"></script>
<!-- Main Script -->
<script src="assets/scripts/script.js?v=6" onerror="console.error('Failed to load script.js')"></script>

<script>
    // Navigation between components
    let currentPage = 'calendar';

    function showComponent(componentName) {
        // Hide all components
        document.querySelectorAll('.page-component').forEach(component => {
            component.style.display = 'none';
        });

        // Show the selected component
        const selectedComponent = document.getElementById(`${componentName}-component`);
        if (selectedComponent) {
            selectedComponent.style.display = 'block';
            currentPage = componentName;
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-page') === componentName) {
                    link.classList.add('active');
                }
            });

            // Show/hide filter button based on component
            const filterBtn = document.getElementById('navbar-filter-btn');
            if (filterBtn) {
                filterBtn.style.display = componentName === 'calendar' ? 'flex' : 'none';
            }

            // Update page title based on component
            const titleElement = document.querySelector('title');
            if (componentName === 'calendar') {
                titleElement.textContent = titleElement.getAttribute('data-label') || 'Red Rebels Calendar 2025';
            } else if (componentName === 'stats') {
                titleElement.textContent = 'Nea Salamina Stats 25/26';
            }

            // Initialize stats if switching to stats page
            if (componentName === 'stats') {
                const statsDisplay = document.getElementById('statistics-display');
                if (statsDisplay && typeof createStatisticsDisplay === 'function') {
                    // Ensure stats are always visible (not collapsed)
                    statsDisplay.style.display = 'block';
                    statsDisplay.innerHTML = createStatisticsDisplay();
                    // Update the global variable if it exists
                    if (typeof statisticsVisible !== 'undefined') {
                        statisticsVisible = true;
                    }
                }
            }
        }
    }

    // Handle navigation clicks
    document.addEventListener('click', function(e) {
        const navLink = e.target.closest('.nav-link[data-page]');
        if (navLink) {
            e.preventDefault();
            const page = navLink.getAttribute('data-page');
            window.location.hash = page;
            showComponent(page);
        }
    });

    // Handle logo click
    document.addEventListener('click', function(e) {
        const brandLink = e.target.closest('.navbar-brand');
        if (brandLink) {
            e.preventDefault();
            window.location.hash = '';
            showComponent('calendar');
        }
    });

    // Debug: Check what loaded successfully
    console.log('=== Loading Check ===');
    console.log('calendarData defined:', typeof calendarData !== 'undefined');
    console.log('createCalendar defined:', typeof createCalendar !== 'undefined');
    console.log('loadMonth defined:', typeof loadMonth !== 'undefined');

    // Initialize on page load - show calendar by default
    document.addEventListener('DOMContentLoaded', function() {
        // Check if there's a hash in the URL to show specific component
        const hash = window.location.hash.substring(1); // Remove the # symbol
        if (hash === 'stats') {
            showComponent('stats');
        } else {
            showComponent('calendar');
        }
    });

    // Handle browser back/forward navigation
    window.addEventListener('hashchange', function() {
        const hash = window.location.hash.substring(1);
        if (hash === 'stats') {
            showComponent('stats');
        } else {
            showComponent('calendar');
        }
    });
</script>
</body>
</html>

